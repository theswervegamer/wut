{% extends "base.html" %}
{% block content %}
<style>:root { --content-w: clamp(1000px, 85vw, 1280px); }</style>
  <h2>{{ wrestler.name }}</h2>


<div style="display:flex; gap:16px; align-items:flex-start; flex-wrap:wrap; margin-bottom:12px;">
  {% if wrestler.photo %}
    <img src="{{ wrestler.photo }}" alt="{{ wrestler.name }} photo" class="profile-photo" />
    <div>
      {% set highlights = wrestler_highlights_db(wrestler.id, 1) %}
      {% include "_highlights.html" %}
    </div>
  {% else %}
    <div style="width:var(--photo-size); height:var(--photo-size); border:1px dashed var(--line); border-radius:12px; display:flex; align-items:center; justify-content:center; color:var(--muted);">No photo</div>
  {% endif %}
</div>



  <table>
    <tbody>
      <tr>
        <th style="width:140px">Gender</th>
        <td>{{ wrestler.gender }}</td>
      </tr>
      <tr>
        <th>Active</th>
        <td>{{ 'Yes' if wrestler.active else 'No' }}</td>
      </tr>
      <tr>
        <th>Tag Teams</th>
        <td>
          {% if not teams %}
            <span class="muted">None</span>
          {% else %}
            <ul style="margin:0; padding-left:0; list-style:none">
              {% for t in teams %}
                <li>{{ t.name }} <span class="muted">({{ t.status }})</span></li>
              {% endfor %}
            </ul>
          {% endif %}
        </td>
      </tr>
      <tr>
        <th>Factions</th>
        <td>
          {% if not factions %}
            <span class="muted">None</span>
          {% else %}
            <ul style="margin:0; padding-left:0; list-style:none">
              {% for f in factions %}
                <li>{{ f.name }} <span class="muted">({{ f.status }})</span></li>
              {% endfor %}
            </ul>
          {% endif %}
        </td>
      </tr>
    </tbody>
  </table>


<style>:root { --content-w: 1400px; }</style>
  <h3 style="margin-top:24px; margin-bottom:8px;">Matches</h3>
  {% if not matches %}
    <p class="muted">No matches recorded yet.</p>
  {% else %}
    <table>
<thead>
        <tr>
            <th style="width:6rem;">Season</th>
            <th>Tournament</th>
            <th>Round</th>
            <th>Stipulation</th>
            <th>Match</th>
            <th>Result</th>
            <th style="width:5rem;">Time</th>
        </tr>
</thead>
      <tbody>
        {% for m in matches %}
          <tr>
            <td>S{{ m.season }}</td>
            <td>{{ m.tournament }}</td>
            <td class="round-col">{{ m.round }}</td>
            <td>{{ m.stipulation or 'â€”' }}</td>
            <td class="match-col">{{ m.match_display_html | safe }}</td>
            <td class="nowrap"><strong>{{ m.result_display_html | safe }}</strong></td>
            <td>{{ m.match_time_display }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% endif %}


  <p style="margin-top:16px">
    <a class="btn" href="/roster">Back to roster</a>
    <a class="btn" href="/roster/edit/{{ wrestler.id }}">Edit profile</a>
    <a class="btn" href="/matches?wid={{ wrestler.id }}">View all matches</a>
  </p>
{% endblock %}
