{% extends "base.html" %}
{% block content %}
  <h2>{{ champ.name }}</h2>

  <style>
    .meta { color: var(--muted); }
    .belt { width: 320px; height: 180px; object-fit: contain; border:1px solid var(--line); border-radius:12px; background:#111; }
    table { width:100%; border-collapse:collapse; margin-top:8px; }
    th, td { text-align:left; padding:8px 10px; border-bottom:1px solid var(--line); }
  </style>

  <p class="meta">Gender: {{ champ.gender }} | Stipulation: {{ champ.stipulation }} | Mode: {{ champ.mode }}</p>

  {% if champ.photo %}
    <img class="belt" src="{{ champ.photo }}" alt="{{ champ.name }} belt">
  {% endif %}

  {% if champ.mode == 'Seasonal' %}
    {% set st = (champ.stipulation or '')|lower %}
    {% set show_ru = st not in ['royal rumble','elimination chamber','rumble','elimination'] %}

    <h3>Champions by Season</h3>
    {% if seasonal_rows %}
      <table>
        {% if show_ru %}
          <thead><tr><th>Season</th><th>Champion</th><th>Runner-up</th></tr></thead>
          <tbody>
            {% for r in seasonal_rows %}
              <tr>
                <td>S{{ r.season }}</td>
                <td>{{ r.champion }}</td>
                <td>{{ r.runner_up or 'â€”' }}</td>
              </tr>
            {% endfor %}
          </tbody>
        {% else %}
          <thead><tr><th>Season</th><th>Champion</th></tr></thead>
          <tbody>
            {% for r in seasonal_rows %}
              <tr>
                <td>S{{ r.season }}</td>
                <td>{{ r.champion }}</td>
              </tr>
            {% endfor %}
          </tbody>
        {% endif %}
      </table>
    {% else %}
      <p class="meta">No seasons recorded yet.</p>
    {% endif %}
  {% else %}
    <h3>Current Reign</h3>
    {% if current_reign %}
      <p>
        <strong>{{ current_reign["champion"] }}</strong>
        <span class="meta">(Champ #{{ current_reign["champ_number"] }}; S{{ current_reign["season_won"] }})</span><br>
        <span class="meta">Successful Defences: {{ current_reign["defences"] }}</span>
      </p>
    {% else %}
      <p class="meta">No active reign.</p>
    {% endif %}

    <h3>Past Reigns</h3>
    {% if reign_rows %}
      <table>
        <thead><tr><th>#</th><th>Champion</th><th>Season Won</th><th>Defences</th></tr></thead>
        <tbody>
          {% for r in reign_rows %}
            <tr>
              <td>{{ r.champ_number or '-' }}</td>
              <td>{{ r.champion }}</td>
              <td>S{{ r.season_won or '-' }}</td>
              <td>{{ r.defences }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p class="meta">No past reigns yet.</p>
    {% endif %}
  {% endif %}
{% endblock %}
